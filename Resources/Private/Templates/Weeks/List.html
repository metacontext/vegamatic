<f:layout name="Default" />

<f:section name="main">
<f:flashMessages />
{namespace v=Tx_Vegamatic_ViewHelpers}

	<div class="row">
	
		<div class="eight columns">
		<h2>Listing for Weeks</h2>
			
			<table>
				<thead>
				<tr>
					<th colspan="3"><f:translate key="tx_vegamatic_domain_model_weeks.weekstamp" /></th>
				</tr>
				</thead>
				<tbody>
				<f:for each="{weeks}" as="week" key="key">
					<tr>
						<td><f:link.action action="show" arguments="{week : week}">{week.weekstamp -> f:format.date()}</f:link.action></td>
						<td>
							<v:implode objects="{0: week.maindish1.name, 1: week.maindish2.name, 2: week.maindish3.name, 3: week.maindish4.name, 4:week.maindish5.name, 5:week.maindish6.name, 6:week.maindish7.name}" glue=", " />
						</td>
						<td>
							<a data-reveal-id="deleteModal{key}">Delete</a>
							<div id="deleteModal{key}" class="reveal-modal">
								<h1>Really?</h1>
								<p>
									Would you really like to delete the week "{week.weekstamp -> f:format.date()}"?
									<div>
									<f:link.action action="delete" controller="Weeks" class="nice medium radius white button" arguments="{week : week}">Delete!</f:link.action>
									<a class="nice medium radius white button close-reveal-modal">TODO: Cancel button</a>
									</div>
								</p>
							</div>
						</td>
					</tr>
				</f:for>
				</tbody>
			</table>
			
			<f:link.action action="new" class="nice medium radius white button">New Weeks</f:link.action>
			<f:link.action action="new" controller="Dishes" class="nice medium radius white button" arguments="{referrerAction : 'list', referrerController : 'Weeks'}">New dishes</f:link.action>			
			
		</div>
		
		<div class="four columns">
			<h3>Other Lists</h4>
			<ul>
			<li><f:link.action action="list" controller="Dishes" arguments="{referrerAction : 'list', referrerController : 'Weeks'}">Show all dishes</f:link.action></li>
			<li><f:link.action action="list" controller="Goods" arguments="{referrerAction : 'list', referrerController : 'Weeks'}">Show all products</f:link.action></li>
			</ul>
		</div>
	
	</div>

</f:section>